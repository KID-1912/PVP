{"version":3,"sources":["webpack:///./src/views/Ads/AdEdit.vue?9e39","webpack:///src/views/Ads/AdEdit.vue","webpack:///./src/views/Ads/AdEdit.vue?0831","webpack:///./src/views/Ads/AdEdit.vue","webpack:///./src/network/ad.js","webpack:///./src/common/mixin.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","id","attrs","nativeOn","$event","preventDefault","save","model","value","callback","$$v","$set","expression","on","items","push","staticClass","staticStyle","_l","item","i","key","getAuthHeader","uploadUrl","res","url","image","splice","staticRenderFns","component","addAd","params","request","method","data","removeAd","updateAd","getAd","getAds","mixinUpload","methods","token","sessionStorage","getItem","Authorization"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAGN,EAAIO,GAAGN,KAAKO,GAAK,KAAO,MAAM,SAASJ,EAAG,UAAU,CAACK,MAAM,CAAC,cAAc,SAASC,SAAS,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBZ,EAAIa,UAAU,CAACT,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,UAAU,CAACL,EAAG,WAAW,CAACU,MAAM,CAACC,MAAOf,EAAIc,MAAU,KAAEE,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIc,MAAO,OAAQG,IAAME,WAAW,iBAAiB,GAAGf,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,OAAO,KAAO,SAASW,GAAG,CAAC,MAAQ,SAAST,GAAQ,OAAOX,EAAIc,MAAMO,MAAMC,KAAK,OAAO,CAAClB,EAAG,IAAI,CAACmB,YAAY,iBAAiBvB,EAAIM,GAAG,aAAaF,EAAG,SAAS,CAACoB,YAAY,CAAC,YAAY,QAAQf,MAAM,CAAC,KAAO,SAAST,EAAIyB,GAAIzB,EAAIc,MAAW,OAAE,SAASY,EAAKC,GAAG,OAAOvB,EAAG,SAAS,CAACwB,IAAID,EAAElB,MAAM,CAAC,GAAK,KAAK,CAACL,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAG,WAAW,CAACU,MAAM,CAACC,MAAOW,EAAU,MAAEV,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKQ,EAAM,QAAST,IAAME,WAAW,iBAAiB,GAAGf,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAG,YAAY,CAACmB,YAAY,kBAAkBd,MAAM,CAAC,QAAUT,EAAI6B,gBAAgB,OAAS7B,EAAI8B,UAAU,kBAAiB,EAAM,aAAa,SAAUC,GAAO,OAAO/B,EAAIkB,KAAKQ,EAAK,QAAQK,EAAIC,QAAU,CAAEN,EAAU,MAAEtB,EAAG,MAAM,CAACmB,YAAY,SAASd,MAAM,CAAC,IAAMiB,EAAKO,SAAS7B,EAAG,IAAI,CAACmB,YAAY,yCAAyC,GAAGnB,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,YAAY,CAACL,EAAG,WAAW,CAACU,MAAM,CAACC,MAAOW,EAAQ,IAAEV,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKQ,EAAM,MAAOT,IAAME,WAAW,eAAe,GAAGf,EAAG,eAAe,CAACA,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,SAAS,KAAO,SAASW,GAAG,CAAC,MAAQ,SAAST,GAAQ,OAAOX,EAAIc,MAAMO,MAAMa,OAAOP,EAAE,MAAM,CAAC3B,EAAIM,GAAG,SAAS,IAAI,MAAK,GAAGF,EAAG,eAAe,CAACA,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,UAAU,cAAc,WAAW,CAACT,EAAIM,GAAG,SAAS,IAAI,IAAI,IAC7vD6B,EAAkB,G,gDCgDtB,GACE,MAAF,CACI,GAAJ,QAEE,OAAF,SACE,KALF,WAMI,MAAJ,CACM,MAAN,CACQ,MAAR,MAIE,QAAF,CACI,KADJ,WACM,IAAN,OAAM,OAAN,0IACA,KADA,gCAEA,6BAFA,6CAIA,wBAJA,OAMA,YACA,eACA,kBARA,8CAWI,MAZJ,WAYM,IAAN,OAAM,OAAN,sJACA,qBADA,OACA,QADA,sDAIE,QA5BF,WA6BI,KAAJ,mBC9E+V,I,YCO3VC,EAAY,eACd,EACArC,EACAoC,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,2CClBf,0LAGO,SAAUC,EAAMC,GACrB,OAAOC,eAAQ,CACbP,IAAK,aACLQ,OAAQ,OACRC,KAAMH,IAIH,SAASI,EAASlC,GACvB,OAAO+B,eAAQ,CACbP,IAAK,cAAF,OAAgBxB,GACnBgC,OAAQ,WAIL,SAASG,EAASnC,EAAG8B,GAC1B,OAAOC,eAAQ,CACbP,IAAK,cAAF,OAAgBxB,GACnBgC,OAAQ,MACRC,KAAMH,IAIH,SAASM,EAAMpC,GACpB,OAAO+B,eAAQ,CACbP,IAAK,cAAF,OAAgBxB,GACnBgC,OAAQ,QAIL,SAASK,IACd,OAAON,eAAQ,CACbP,IAAK,aACLQ,OAAQ,U,kCC/BZ,kCAAO,IAAMM,EAAc,CACzBL,KADyB,WAEvB,MAAO,CACLX,UAAW,2CAGfiB,QAAS,CACPlB,cADO,WAEL,IAAMmB,EAAQC,eAAeC,QAAQ,UAAY,GACjD,MAAO,CACLC,cAAe,SAAF,OAAWH","file":"js/chunk-17d6fb52.9315c95f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h4',[_vm._v(_vm._s(this.id ? '编辑' : '新建')+\"广告栏\")]),_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save()}}},[_c('el-form-item',{attrs:{\"label\":\"广告栏名称\"}},[_c('el-input',{model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.model.items.push({})}}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\" 添加广告项 \")]),_c('el-row',{staticStyle:{\"flex-wrap\":\"wrap\"},attrs:{\"type\":\"flex\"}},_vm._l((_vm.model.items),function(item,i){return _c('el-col',{key:i,attrs:{\"md\":12}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{model:{value:(item.title),callback:function ($$v) {_vm.$set(item, \"title\", $$v)},expression:\"item.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图片\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"headers\":_vm.getAuthHeader(),\"action\":_vm.uploadUrl,\"show-file-list\":false,\"on-success\":function (res) { return _vm.$set(item,'image',res.url); }}},[(item.image)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":item.image}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"链接(URL)\"}},[_c('el-input',{model:{value:(item.url),callback:function ($$v) {_vm.$set(item, \"url\", $$v)},expression:\"item.url\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.model.items.splice(i,1)}}},[_vm._v(\"删除\")])],1)],1)}),1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h4>{{this.id ? '编辑' : '新建'}}广告栏</h4>\r\n    <el-form label-width=\"120px\" @submit.native.prevent=\"save()\">\r\n      <el-form-item label=\"广告栏名称\">\r\n        <el-input v-model=\"model.name\"></el-input>\r\n      </el-form-item>\r\n      <el-button type=\"text\" size=\"small\" @click=\"model.items.push({})\">\r\n        <i class=\"el-icon-plus\"></i> 添加广告项\r\n      </el-button>\r\n      <el-row type=\"flex\" style=\"flex-wrap: wrap\">\r\n        <el-col :md=\"12\" v-for=\"(item,i) in model.items\" :key=\"i\">\r\n          <el-form-item label=\"标题\">\r\n            <el-input v-model=\"item.title\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"图片\">\r\n            <el-upload \r\n            class=\"avatar-uploader\" \r\n            :headers=\"getAuthHeader()\" \r\n            :action=\"uploadUrl\" :show-file-list=\"false\" \r\n            :on-success=\"res => $set(item,'image',res.url)\">\r\n              <img v-if=\"item.image\" :src=\"item.image\" class=\"avatar\">\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label=\"链接(URL)\">\r\n            <el-input v-model=\"item.url\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button \r\n            @click=\"model.items.splice(i,1)\" \r\n            type=\"danger\" size=\"small\">删除</el-button>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-form-item>\r\n        <el-button \r\n        type=\"primary\" native-type=\"submit\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mixinUpload} from 'common/mixin'\r\n\r\n  // 请求模块\r\n  import {addAd,getAd,updateAd} from 'network/ad'\r\n  \r\n  export default {\r\n    props: {\r\n      id: String\r\n    },\r\n    mixins: [mixinUpload],\r\n    data(){\r\n      return {\r\n        model: {\r\n          items: []\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      async save(){\r\n        if(this.id){\r\n          await updateAd(this.id,this.model)\r\n        }else{\r\n          await addAd(this.model);\r\n        }\r\n        this.$message({\r\n          type: 'success',\r\n          message: '保存成功!'\r\n        });\r\n      },\r\n      async fetch(){\r\n        this.model = await getAd(this.id);\r\n      }\r\n    },\r\n    created(){\r\n      this.id && this.fetch();\r\n    }\r\n  }\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdEdit.vue?vue&type=template&id=040ef4fc&\"\nimport script from \"./AdEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./AdEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {request} from './request.js'\r\n\r\n\r\nexport function  addAd(params) {\r\n  return request({\r\n    url: '/reset/ads',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function removeAd(id) {\r\n  return request({\r\n    url: `/reset/ads/${id}`,\r\n    method: 'delete',\r\n  })\r\n}\r\n\r\nexport function updateAd(id,params) {\r\n  return request({\r\n    url: `/reset/ads/${id}`,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function getAd(id) {\r\n  return request({\r\n    url: `/reset/ads/${id}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function getAds() {\r\n  return request({\r\n    url: `/reset/ads`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n\r\n\r\n","\r\n\r\n\r\n\r\n\r\nexport const mixinUpload = {\r\n  data(){\r\n    return {\r\n      uploadUrl: \"http://localhost:3000/admin/api/upload\",\r\n    }\r\n  },\r\n  methods: {\r\n    getAuthHeader(){\r\n      const token = sessionStorage.getItem('token') || '';\r\n      return {\r\n        Authorization: `Basic ${token}`\r\n      }\r\n    }\r\n  }\r\n}"],"sourceRoot":""}