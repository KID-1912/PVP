{"version":3,"sources":["webpack:///./src/network/video.js","webpack:///./src/network/category.js","webpack:///./src/views/Videos/VideoEdit.vue?6a01","webpack:///src/views/Videos/VideoEdit.vue","webpack:///./src/views/Videos/VideoEdit.vue?fee0","webpack:///./src/views/Videos/VideoEdit.vue","webpack:///./src/common/mixin.js"],"names":["addVideo","params","request","url","method","data","removeVideo","id","updateVideo","getVideos","getVideo","addCategory","removeCategory","updateCategory","getCategories","getCategory","render","_vm","this","_h","$createElement","_c","_self","_v","_s","attrs","nativeOn","$event","preventDefault","save","model","value","callback","$$v","$set","expression","_l","item","key","_id","name","staticClass","uploadUrl","getAuthHeader","res","banner","staticRenderFns","component","mixinUpload","process","VUE_APP_API_URL","methods","token","sessionStorage","getItem","Authorization"],"mappings":"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","file":"js/chunk-6afc5014.5c46d81f.js","sourcesContent":["import {request} from './request'\r\n\r\n\r\n\r\n\r\nexport function addVideo(params) {\r\n  return request({\r\n    url: '/reset/videos',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n\r\n\r\nexport function removeVideo(id) {\r\n  return request({\r\n    url: `/reset/videos/${id}`,\r\n    method: 'delete',\r\n  })\r\n}\r\n\r\nexport function updateVideo(id,params) {\r\n  return request({\r\n    url: `/reset/videos/${id}`,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function getVideos() {\r\n  return request({\r\n    url: '/reset/videos',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n\r\nexport function getVideo(id) {\r\n  return request({\r\n    url: `/reset/videos/${id}`,\r\n    method: 'get'\r\n  })\r\n}","// 向后端发起的categorys路径请求\r\n\r\nimport {request} from './request.js'\r\n\r\n\r\n\r\nexport function addCategory(params){\r\n  return request({\r\n    url: 'reset/categories',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function removeCategory(id){\r\n  return request({\r\n    url: `reset/categories/${id}`,\r\n    method: 'delete'\r\n  })\r\n}\r\n\r\nexport function updateCategory(id,params){\r\n  return request({\r\n    url: `reset/categories/${id}`,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function getCategories(){\r\n  return request({\r\n    url: 'reset/categories',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function getCategory(id){\r\n  return request({\r\n    url: `reset/categories/${id}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(_vm._s(_vm.id ? '编辑' : '新建')+\"视频\")]),_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save()}}},[_c('el-form-item',{attrs:{\"label\":\"视频分类\"}},[_c('el-select',{attrs:{\"placeholder\":\"视频分类\"},model:{value:(_vm.model.category),callback:function ($$v) {_vm.$set(_vm.model, \"category\", $$v)},expression:\"model.category\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{model:{value:(_vm.model.title),callback:function ($$v) {_vm.$set(_vm.model, \"title\", $$v)},expression:\"model.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"banner\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"headers\":_vm.getAuthHeader(),\"show-file-list\":false,\"on-success\":function (res) { return _vm.$set(_vm.model,'banner',res.url); }}},[(_vm.model.banner)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.model.banner}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"链接\"}},[_c('el-input',{model:{value:(_vm.model.url),callback:function ($$v) {_vm.$set(_vm.model, \"url\", $$v)},expression:\"model.url\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>{{id ? '编辑' : '新建'}}视频</h1>\r\n    <el-form label-width=\"120px\" @submit.native.prevent=\"save()\">\r\n      <el-form-item label=\"视频分类\">\r\n        <el-select v-model=\"model.category\" placeholder=\"视频分类\">\r\n          <el-option\r\n            v-for=\"item in categories\"\r\n            :key=\"item._id\"\r\n            :label=\"item.name\"\r\n            :value=\"item._id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"名称\">\r\n        <el-input v-model=\"model.title\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"banner\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"uploadUrl\"\r\n          :headers=\"getAuthHeader()\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"res => $set(model,'banner',res.url)\">\r\n          <img v-if=\"model.banner\" :src=\"model.banner\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"链接\">\r\n        <el-input v-model=\"model.url\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" native-type=\"submit\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mixinUpload} from 'common/mixin'\r\n  import {addVideo,getVideo,updateVideo} from 'network/video'\r\n  import {getCategories} from 'network/category'\r\n\r\n  export default {\r\n    props: {\r\n      id: String\r\n    },\r\n    mixins: [mixinUpload],\r\n    data(){\r\n      return {\r\n        categories: [],\r\n        model: {}\r\n      }\r\n    },\r\n    methods: {\r\n      // 编辑视频的原纪录\r\n      async fetch(){\r\n        this.model = await getVideo(this.id);\r\n      },\r\n      // 提交视频记录\r\n      async save(){\r\n        if(this.id) {\r\n          // 发送修改指定Id的Video请求\r\n          await updateVideo(this.id,this.model);\r\n        }else{\r\n          // 发送添加Article记录的请求\r\n          await addVideo(this.model);       \r\n        }\r\n        this.$message({\r\n          message: '保存成功',\r\n          type: 'success'\r\n        });\r\n        this.id && this.$router.push('/videos/list');\r\n      },\r\n      // 查询所有视频类别作为可选项\r\n      async queryCategories(){\r\n        this.categories = await getCategories();\r\n      },\r\n    },\r\n    created(){\r\n      this.id && this.fetch();\r\n      this.queryCategories();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  \r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoEdit.vue?vue&type=template&id=bc50525c&scoped=true&\"\nimport script from \"./VideoEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc50525c\",\n  null\n  \n)\n\nexport default component.exports","\r\n\r\n\r\n\r\n\r\nexport const mixinUpload = {\r\n  data(){\r\n    return {\r\n      uploadUrl: (process.env.VUE_APP_API_URL  || \"/admin/api\") + '/upload',\r\n    }\r\n  },\r\n  methods: {\r\n    getAuthHeader(){\r\n      const token = sessionStorage.getItem('token') || '';\r\n      return {\r\n        Authorization: `Basic ${token}`\r\n      }\r\n    }\r\n  }\r\n}"],"sourceRoot":""}