{"version":3,"sources":["webpack:///./src/network/item.js","webpack:///./src/views/Items/ItemEdit.vue?eb4b","webpack:///src/views/Items/ItemEdit.vue","webpack:///./src/views/Items/ItemEdit.vue?5d6e","webpack:///./src/views/Items/ItemEdit.vue","webpack:///./src/common/mixin.js"],"names":["addItem","params","request","url","method","data","removeItem","id","updateItem","getItem","getItems","render","_vm","this","_h","$createElement","_c","_self","_v","_s","attrs","nativeOn","$event","preventDefault","save","model","value","callback","$$v","$set","expression","staticClass","uploadUrl","getAuthHeader","afterUpload","icon","staticRenderFns","component","mixinUpload","methods","token","sessionStorage","Authorization"],"mappings":"kHAAA,0LAIO,SAASA,EAAQC,GACtB,OAAOC,eAAQ,CACbC,IAAK,eACLC,OAAQ,OACRC,KAAMJ,IAIH,SAASK,EAAWC,GACzB,OAAOL,eAAQ,CACbC,IAAK,gBAAF,OAAkBI,GACrBH,OAAQ,WAIL,SAASI,EAAWD,EAAGN,GAC5B,OAAOC,eAAQ,CACbC,IAAK,gBAAF,OAAkBI,GACrBH,OAAQ,MACRC,KAAMJ,IAIH,SAASQ,EAAQF,GACtB,OAAOL,eAAQ,CACbC,IAAK,gBAAF,OAAkBI,GACrBH,OAAQ,QAIL,SAASM,IACd,OAAOR,eAAQ,CACbC,IAAK,eACLC,OAAQ,U,yCCrCZ,IAAIO,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAGN,EAAIO,GAAGP,EAAIL,GAAK,KAAO,MAAM,QAAQS,EAAG,UAAU,CAACI,MAAM,CAAC,cAAc,SAASC,SAAS,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBX,EAAIY,UAAU,CAACR,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACS,MAAM,CAACC,MAAOd,EAAIa,MAAU,KAAEE,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIa,MAAO,OAAQG,IAAME,WAAW,iBAAiB,GAAGd,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,YAAY,CAACe,YAAY,kBAAkBX,MAAM,CAAC,OAASR,EAAIoB,UAAU,QAAUpB,EAAIqB,gBAAgB,kBAAiB,EAAM,aAAarB,EAAIsB,cAAc,CAAEtB,EAAIa,MAAU,KAAET,EAAG,MAAM,CAACe,YAAY,SAASX,MAAM,CAAC,IAAMR,EAAIa,MAAMU,QAAQnB,EAAG,IAAI,CAACe,YAAY,yCAAyC,GAAGf,EAAG,eAAe,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,UAAU,cAAc,WAAW,CAACR,EAAIM,GAAG,SAAS,IAAI,IAAI,IACj5BkB,EAAkB,G,gDC6BtB,GACE,MAAF,CACI,GAAJ,QAEE,OAAF,SACE,KALF,WAMI,MAAJ,CACM,UAAN,yCACM,MAAN,KAGE,QAAF,CACI,MADJ,WACM,IAAN,OAAM,OAAN,sJACA,qBADA,OACA,QADA,qDAGI,YAJJ,SAIA,GACM,KAAN,+BAEI,KAPJ,WAOM,IAAN,OAAM,OAAN,0IACA,KADA,gCAEA,6BAFA,6CAIA,wBAJA,OAMA,YACA,eACA,iBAEA,oCAVA,+CAaE,QA/BF,WAgCI,KAAJ,mBC9DiW,I,YCO7VC,EAAY,eACd,EACA1B,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CCbf,kCAAO,IAAMC,EAAc,CACzBjC,KADyB,WAEvB,MAAO,CACL2B,UAAW,2CAGfO,QAAS,CACPN,cADO,WAEL,IAAMO,EAAQC,eAAehC,QAAQ,UAAY,GACjD,MAAO,CACLiC,cAAe,SAAF,OAAWF","file":"js/chunk-e7fe9328.9dcdd16b.js","sourcesContent":["import {request} from './request'\r\n\r\n\r\n\r\nexport function addItem(params){\r\n  return request({\r\n    url: '/reset/items',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function removeItem(id){\r\n  return request({\r\n    url: `/reset/items/${id}`,\r\n    method: 'delete'\r\n  })\r\n}\r\n\r\nexport function updateItem(id,params){\r\n  return request({\r\n    url: `/reset/items/${id}`,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function getItem(id){\r\n  return request({\r\n    url: `/reset/items/${id}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function getItems(){\r\n  return request({\r\n    url: '/reset/items',\r\n    method: 'get'\r\n  })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(_vm._s(_vm.id ? '编辑' : '新建')+\"物品\")]),_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save()}}},[_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图标\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"headers\":_vm.getAuthHeader(),\"show-file-list\":false,\"on-success\":_vm.afterUpload}},[(_vm.model.icon)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.model.icon}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>{{id ? '编辑' : '新建'}}物品</h1>\r\n    <el-form label-width=\"120px\" @submit.native.prevent=\"save()\">\r\n      <el-form-item label=\"名称\">\r\n        <el-input v-model=\"model.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"图标\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"uploadUrl\"\r\n          :headers=\"getAuthHeader()\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"afterUpload\">\r\n          <img v-if=\"model.icon\" :src=\"model.icon\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" native-type=\"submit\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mixinUpload} from 'common/mixin'\r\n  // 请求模块\r\n  import {addItem,getItem,updateItem} from 'network/item'\r\n\r\n  export default {\r\n    props: {\r\n      id: String\r\n    },\r\n    mixins: [mixinUpload],\r\n    data(){\r\n      return {\r\n        uploadUrl: \"http://localhost:3000/admin/api/upload\",\r\n        model: {}\r\n      }\r\n    },\r\n    methods: {\r\n      async fetch(){\r\n        this.model = await getItem(this.id);\r\n      },\r\n      afterUpload(result){ //上传完成显示上传的图片\r\n        this.$set(this.model,'icon',result.url);\r\n      },\r\n      async save(){\r\n        if(this.id){\r\n          await updateItem(this.id,this.model);\r\n        }else{\r\n          await addItem(this.model);\r\n        }\r\n        this.$message({\r\n          message: '保存成功',\r\n          type: 'success'\r\n        });\r\n        this.id && this.$router.push('/items/list')\r\n      }\r\n    },\r\n    created(){\r\n      this.id && this.fetch();\r\n    }\r\n\r\n\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemEdit.vue?vue&type=template&id=0e5b0bce&scoped=true&\"\nimport script from \"./ItemEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e5b0bce\",\n  null\n  \n)\n\nexport default component.exports","\r\n\r\n\r\n\r\n\r\nexport const mixinUpload = {\r\n  data(){\r\n    return {\r\n      uploadUrl: \"http://localhost:3000/admin/api/upload\",\r\n    }\r\n  },\r\n  methods: {\r\n    getAuthHeader(){\r\n      const token = sessionStorage.getItem('token') || '';\r\n      return {\r\n        Authorization: `Basic ${token}`\r\n      }\r\n    }\r\n  }\r\n}"],"sourceRoot":""}